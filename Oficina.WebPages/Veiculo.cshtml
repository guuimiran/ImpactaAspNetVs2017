@using Oficina.WebPages;

@{ 
    var _veiculoAplicacao = new VeiculoAplicacao();
    if (IsPost)
    {
        _veiculoAplicacao.Inserir();
    }
}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Cadastro de Veiculos</title>
</head>
<body>
    <div>
    <h1> Cadastro de veiculos </h1>
        <style>

            label {
                min-width: 100px;
                display: inline-block;
            }

            input, select {
                min-width: 200px;
                min-height: 24px;
                margin-bottom: 5px;
            }

                input[type=submit] {
                    width: 300px;
                }

        </style>


        <hr/>
        <form method="post">

            <label for="marca">Marca</label>
            <select name="marca" id="marca" onchange="obterModelos(this.value)">
                <option value="">Selecione</option>
                @foreach (var marca in _veiculoAplicacao.Marcas)
                {
                    <option value="@marca.Id" selected="@Convert.ToBoolean(marca.Id.ToString() == _veiculoAplicacao.MarcaSelecionada)">@marca.Nome</option>
                }

            </select>
            <br/>
                <label for="modelo">Modelo</label>
                <select name="modelo" id="modelo">
                    <option value="">Selecione</option>
                    @foreach (var modelo in _veiculoAplicacao.Modelos)
                    {
                        <option value="@modelo.Id">@modelo.Nome</option>
                    }

                </select>
                <br />

            <label for="placa">Placa</label>
            <input type="text" name="placa" id="placa" />
               <br />


            <label for="ano">Ano</label>
            <input type="text" name="ano" id="ano" />
            <br />

            <label for="cor">Cor</label>
            <select name="cor" id="cor">
                <option value="">Selecione</option>
                @foreach (var cor in _veiculoAplicacao.Cores)
                {
                    <option value="@cor.Id">@cor.Nome</option>
                }
            </select>
            <br />

            <label for="combustivel">Combustivel</label>
            <select name="combustivel" id="combustivel">
                <option value="">Selecione</option>
                @foreach (var combustivel in _veiculoAplicacao.Combustiveis)
                {
                    <option value="@((int)combustivel)">@combustivel</option>
                }
            </select>
            <br />
            <label for="cambio">Cambio</label>
            <select name="cambio" id="cambio">
                <option value="">Selecione</option>
                @foreach (var cambio in _veiculoAplicacao.Cambios)
                {
                    <option value="@((int)cambio)">@cambio</option>
                }
            </select>
            <br />

            <label for="observacao"> Observação</label>
                <br/>
            
            <textarea name="observacao" id="observacao" rows="10" cols="40"></textarea>

            <br />

            <input type="submit" value="Gravar" />
</form>
        <script type="text/javascript">

            function obterModelos(marcaId) {

                //trocando a HRL dentro do servidor.
                const
                    nomePagina = document.location.pathname;
                document.location.href = nomePagina + "?marcaId=" + marcaId;


            }

        </script>

    </div>
</body>
</html>
